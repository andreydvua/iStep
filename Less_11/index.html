<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	
	<!-- My style -->
	<link rel="stylesheet" href="style.css">
	
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
  <div class="container">
	<div class="row">
		<div class="col-md-4 col-md-offset-4 above-element">test</div>
	</div>
	<div class="row">
		<div class="col-lg-5 col-md-8 pat1">
			<h2>Acknowledgments</h2>
				<p>As with any book, what's written here has a great deal to do with the many people who have worked with me in various ways over the years. Lots of people have helped in
					lots of ways. Often I don't recall important things people said that went into this book, but I can acknowledge those contributions I do remember.</p>
				<p>I'll start with my contributors. David Rice, a colleague of mine at ThoughtWorks, has made a huge contribution — a good tenth of the book. As we worked hard
					to hit the deadline (while he was also supporting a client), we had several late-night instant message conversations where he confessed to finally seeing
					why writing a book is both so hard and so compulsive.</p>
				<p>Matt Foemmel is another ThoughtWorker, and although the Arctic will need air conditioning before he writes prose for fun, he's been a great contributor of 
					code examples (as well as a very succinct critic of the book.) I was pleased that Randy Stafford contributed <i>Service Layer</i> (133) as he's been such a strong
					advocate for it. I'd also like to thank Edward Hieatt and Rob Mee for their contribution, which arose from Rob's noticing a gap while he was doing his review
					of the text. He became my favorite reviewer: Not only does he notice something missing, he helps write a section to fix it!</p>
				<p>As usual, I owe more than I can say to my first-class panel of official reviewers:</p>
		</div>
		<div class="col-lg-6 col-md-3 col-md-offset-1 pat2">
			<table>
				<tr>
					<td>John Brewer</td>
					<td>Rob Mee</td>
				</tr>
				<tr>
					<td>Kyle Brown</td>
					<td>Gerard Meszarios</td>
				</tr>
				<tr>
					<td>Jens Coldewey</td>
					<td> Dirk Riehle</td>
				</tr>
				<tr>
					<td>John Crupi</td>
					<td>Randy Stafford</td>
				</tr>
				<tr>
					<td>Leonard Fenster</td>
					<td> David Siegel</td>
				</tr>
				<tr>
					<td>Alan Knight</td>
					<td> Kai Yu</td>
				</tr>
			</table>
		</div>
	</div>
	<div class="row">
		<div class="col-lg-10 col-md-3 pat3">
			<h2>Transactions</h2>
				<p class="hidden-md">The primary tool for handling concurrency in enterprise applications is the transaction. The word вЂњtransactionвЂќ often brings to mind an exchange of money or goods. Walking up to an ATM machine, entering your PIN, and withdrawing cash is a transaction. Paying the $3 toll at the Golden Gate Bridge is a transaction. Buying a beer at the local pub is a transaction.</p>
				<p>Looking at typical financial dealings such as these provides a good definition for the term. First, a transaction is a bounded sequence of work, with both start and endpoints well defined. An ATM transaction begins when the card is inserted and ends when cash is delivered or an inadequate balance is discovered. Second, all participating resources are in a consistent state both when the transaction begins and when the transaction ends. A man purchasing a beer has a few bucks less in his wallet but has a nice pale ale in front of him. The sum value of his assets hasnвЂ™t changed. ItвЂ™s the same for the pubвЂ”pouring free beer would be no way to run a business.</p>
				<p>In addition, each transaction must complete on an all-or-nothing basis. The bank canвЂ™t subtract from an account holderвЂ™s balance unless the ATM machine actually delivers the cash. While the human element might make this last property optional during the above transactions, there is no reason software canвЂ™t make a guarantee on this front.</p>
		</div>
		<div class="col-lg-2 col-md-8 col-md-offset-1 pat4">
			<h2>Transactional Resources</h2>
				<p class="hidden-md">Most enterprise applications run into transactions in terms of databases. But there are plenty of other things that can be controlled using transactions, such as message queues, printers, and ATMs. As a result, technical discussions of transactions use the term вЂњtransactional resourceвЂќ to mean anything thatвЂ™s transactionalвЂ”that is, that uses transactions to control concurrency. вЂњTransactional resourceвЂќ is a bit of a mouthful, so we just use вЂњdatabase,вЂќ since thatвЂ™s the most common case. But when we say вЂњdatabase,вЂќ the same applies for any other transactional resource.</p>
				<p>To handle the greatest throughput, modern transaction systems are designed to keep transactions as short as possible. As a result the general advice is to never make a transaction span multiple requests. A transaction that spans multiple requests is generally known as a <strong>long transaction</strong>.</p>
				<p>For this reason a common approach is to start a transaction at the beginning of a request and complete it at the end. This <sterong>request transaction</sterong> is a nice simple model, and a number of environments make it easy to do declaratively, by just tagging methods as transactional.</p>
				<p class="hidden-md">A variation on this is to open a transaction as late as possible. With a <sterong>late transaction</sterong> you may do all the reads outside it and only open it up when you do updates. This has the advantage of minimizing the time spent in a transaction. If thereвЂ™s a lengthy time lag between the opening of the transaction and the first write, this may improve liveness. However, this means that you donвЂ™t have any concurrency control until you begin the transaction, which leaves you open to inconsistent reads. As a result itвЂ™s usually not worth doing this unless you have very heavy contention or youвЂ™re doing it anyway because of business transactions that span multiple requests (which is the next topic).</p>
				<p class="hidden-md">When you use transactions, you need be somewhat aware of what exactly is being locked. For many database actions the transaction system locks the rows involved, which allows multiple transactions to access the same table. However, if a transaction locks a lot of rows in a table, then the database has more locks than it can handle and escalates the locking to the entire tableвЂ”locking out other transactions. This <strong>lock escalation</strong> can have a serious effect on concurrency, and itвЂ™s particularly why you shouldnвЂ™t have some вЂњobjectвЂќ table for data at the domainвЂ™s Layer Supertype (475) level. Such a table is a prime candidate for lock escalation, and locking that table shuts everybody else out of the database.</p>
		</div>
	</div>
	<div class="row">
		<div class="col-lg-3 hidden-sm pat5">
			<h2>Business and System Transactions</h2>
				<p class="hidden-md">What weвЂ™ve talked about so far, and most of what most people talk about, is what we call system transactions, or transactions supported by RDBMS systems and transaction monitors. A database transaction is a group of SQL commands delimited by instructions to begin and end it. If the fourth statement in the transaction results in an integrity constraint violation, the database must roll back the effects of the first three statements and notify the caller that the transaction has failed. If all four statements had completed successfully all would have been made visible to other users at the same time rather than one at a time. RDBMS systems and application server transaction managers are so commonplace that they can pretty much be taken for granted. They work well and are well understood by application developers.</p>
				<p>However, a system transaction has no meaning to the user of a business system. To an online banking system user a transaction consists of logging in, selecting an account, setting up some bill payments, and finally clicking the OK button to pay the bills. This is what we call a <strong>business transaction</strong>, and that it displays the same ACID properties as a system transaction seems a reasonable expectation. If the user cancels before paying the bills, any changes made on previous screens should be canceled. Setting up payments shouldnвЂ™t result in a system-visible balance change until the OK button is pressed.</p>
		</div>
		<div class="col-lg-9 hidden-sm pat6">
			<h2>Transactional Resources</h2>
				<p class="hidden-md">Most enterprise applications run into transactions in terms of databases. But there are plenty of other things that can be controlled using transactions, such as message queues, printers, and ATMs. As a result, technical discussions of transactions use the term вЂњtransactional resourceвЂќ to mean anything thatвЂ™s transactionalвЂ”that is, that uses transactions to control concurrency. вЂњTransactional resourceвЂќ is a bit of a mouthful, so we just use вЂњdatabase,вЂќ since thatвЂ™s the most common case. But when we say вЂњdatabase,вЂќ the same applies for any other transactional resource.</p>
				<p class="hidden-md">To handle the greatest throughput, modern transaction systems are designed to keep transactions as short as possible. As a result the general advice is to never make a transaction span multiple requests. A transaction that spans multiple requests is generally known as a <strong>long transaction</strong>.</p>
				<p class="hidden-md">For this reason a common approach is to start a transaction at the beginning of a request and complete it at the end. This <sterong>request transaction</sterong> is a nice simple model, and a number of environments make it easy to do declaratively, by just tagging methods as transactional.</p>
		</div>
	</div>
	</div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>